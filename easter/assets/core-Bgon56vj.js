var j=Object.defineProperty;var A=(n,e,t)=>e in n?j(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var d=(n,e,t)=>A(n,typeof e!="symbol"?e+"":e,t);import{d as p,c as u,a as $,o as a,b as l,t as K,i as z,u as i,n as E,r as S,e as c,F as R,f as q,g as x,h as H,j as U,w as M,k,l as V,m as F,p as T,q as O,s as N,v as W,x as G,y as J,z as Q}from"./vue-cheJyXfD.js";const X=".easter-root{position:fixed;top:0;left:0;width:100%;height:100%;z-index:10000;display:flex;justify-content:center;align-items:flex-start;padding-top:2.5rem;padding-bottom:1.5rem;pointer-events:none}@media (min-width: 640px){.easter-root{align-items:flex-start;padding-top:3rem;padding-bottom:0}}@media (min-width: 768px){.easter-root{align-items:center;padding-top:0;padding-bottom:0}}",Y={key:0,class:"ee-error-modal"},Z={class:"ee-error-content z-30"},I=p({__name:"ErrorModal",props:{show:{type:Boolean},message:{}},emits:["close"],setup(n,{emit:e}){const t=e;return(o,r)=>o.show?(a(),u("div",Y,[l("div",Z,[r[1]||(r[1]=l("h3",null,"Oops! Something went wrong",-1)),l("p",null,K(o.message),1),r[2]||(r[2]=l("p",{class:"ee-error-note"}," Don't worry, our team has been notified and we're working on it. ",-1)),l("button",{onClick:r[0]||(r[0]=s=>t("close")),class:"ee-error-close"},"Close")])])):$("",!0)}}),B=(n,e)=>{const t=n.__vccOpts||n;for(const[o,r]of e)t[o]=r;return t},ee=B(I,[["__scopeId","data-v-ce64f89c"]]),te=p({__name:"ShellBackdrop",props:{isVisible:{type:Boolean}},setup(n){const e=z("closeModal");return(t,o)=>(a(),u("div",{class:E(["fixed top-0 left-0 w-full h-full bg-black/70 transition-opacity duration-300",t.isVisible?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"]),onClick:o[0]||(o[0]=(...r)=>i(e)&&i(e)(...r)),onTouchend:o[1]||(o[1]=(...r)=>i(e)&&i(e)(...r))},null,34))}}),oe=p({__name:"FixModalFrame",props:{isVisible:{type:Boolean}},setup(n){return(e,t)=>(a(),u("div",{class:E(["relative z-10 box-border border border-yellow-700",e.isVisible?"opacity-100 pointer-events-auto transition-all duration-300 ease-in-out":"opacity-0 pointer-events-none"])},[S(e.$slots,"default"),t[0]||(t[0]=l("div",{class:"absolute bottom-0 left-0 right-0 h-10 bg-gradient-to-t from-gray-900 to-transparent lg:h-0"},null,-1))],2))}}),se=p({__name:"DefaultCloseButton",emits:["close"],setup(n,{emit:e}){const t=e,o=r=>{t("close")};return(r,s)=>(a(),u("button",{class:"ee-default-close",onClick:o,onTouchend:o,"aria-label":"Close Easter Egg"},s[0]||(s[0]=[l("svg",{class:"w-8 h-8",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},[l("path",{d:"M6 6 L18 18"}),l("path",{d:"M18 6 L6 18"})],-1)]),32))}}),L=B(se,[["__scopeId","data-v-6d550e96"]]),re={class:"ee-content bg-image-blue"},ne=p({__name:"FixModalShell",setup(n){const e=z("closeModal");return(t,o)=>(a(),u("div",re,[c(L,{onClose:i(e)},null,8,["onClose"]),S(t.$slots,"default",{},void 0,!0)]))}}),le=B(ne,[["__scopeId","data-v-2401c1ec"]]),ie=p({__name:"FloatModalFrame",props:{isVisible:{type:Boolean}},setup(n){const e=z("closeModal");return(t,o)=>(a(),u("div",{class:E(["z-10",t.isVisible?"opacity-100 pointer-events-auto transition-all duration-300 ease-in-out":"opacity-0 pointer-events-none"])},[S(t.$slots,"default"),c(L,{onClose:i(e)},null,8,["onClose"])],2))}}),ae={class:"grid grid-cols-3 grid-rows-3 w-full h-full"},P=p({__name:"ControllerDPad",props:{onDirection:{type:Function},size:{}},setup(n){const e=n,t=e.onDirection,o=e.size??"w-24 h-24";return(r,s)=>(a(),u("div",{class:E([i(o)])},[l("div",ae,[s[8]||(s[8]=l("div",null,null,-1)),l("button",{"aria-label":"Up",class:"flex items-center justify-center w-full h-full bg-gray-700 rounded-tl-lg rounded-tr-lg focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:s[0]||(s[0]=()=>i(t)("up"))},s[4]||(s[4]=[l("svg",{class:"w-6 h-6 text-gray-200",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("polyline",{points:"6 15 12 9 18 15"})],-1)])),s[9]||(s[9]=l("div",null,null,-1)),l("button",{"aria-label":"Left",class:"flex items-center justify-center w-full h-full bg-gray-700 rounded-tl-lg rounded-bl-lg focus:outline-none focus:ring-2 focus:ring-blue-400",style:{"grid-row":"2","grid-column":"1"},onClick:s[1]||(s[1]=()=>i(t)("left"))},s[5]||(s[5]=[l("svg",{class:"w-6 h-6 text-gray-200 transform -rotate-90",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("polyline",{points:"6 15 12 9 18 15"})],-1)])),s[10]||(s[10]=l("div",{class:"w-full h-full bg-gray-700"},null,-1)),l("button",{"aria-label":"Right",class:"flex items-center justify-center w-full h-full bg-gray-700 rounded-tr-lg rounded-br-lg focus:outline-none focus:ring-2 focus:ring-blue-400",style:{"grid-row":"2","grid-column":"3"},onClick:s[2]||(s[2]=()=>i(t)("right"))},s[6]||(s[6]=[l("svg",{class:"w-6 h-6 text-gray-200 transform rotate-90",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("polyline",{points:"6 15 12 9 18 15"})],-1)])),s[11]||(s[11]=l("div",null,null,-1)),l("button",{"aria-label":"Down",class:"flex items-center justify-center w-full h-full bg-gray-700 rounded-bl-lg rounded-br-lg focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:s[3]||(s[3]=()=>i(t)("down"))},s[7]||(s[7]=[l("svg",{class:"w-6 h-6 text-gray-200 transform rotate-180",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[l("polyline",{points:"6 15 12 9 18 15"})],-1)])),s[12]||(s[12]=l("div",null,null,-1))])],2))}}),ce=["aria-label"],w=p({__name:"ControllerButton",props:{label:{},color:{},onPress:{type:Function},shape:{},textColor:{},size:{}},setup(n){const e=n,t=e.shape??"round",o=e.textColor??"text-white",r=e.size??"";return(s,g)=>(a(),u("button",{"aria-label":s.label+" button",class:E(["shadow leading-0 focus:outline-none focus:ring-2 focus:ring-blue-600 flex items-center justify-center",i(t)==="pill"?`rounded-full ${s.color} ${i(o)} text-base font-semibold`:`rounded-full ${s.color} text-2xl font-bold ${i(o)}`,i(r)]),onClick:g[0]||(g[0]=(...f)=>s.onPress&&s.onPress(...f))},[l("span",null,K(s.label),1)],10,ce))}}),ue={class:"relative flex flex-col items-center select-none bg-gray-50 rounded-xl p-3 py-6 border-4 border-gray-400"},de={class:"flex flex-col items-center gap-4 pt-4"},pe={class:"pt-4"},ge=p({__name:"WiiController",props:{onButtonPress:{}},setup(n){const t=n.onButtonPress;return(o,r)=>(a(),u("div",ue,[c(P,{onDirection:i(t),size:"w-30 h-30",class:"mb-6"},null,8,["onDirection"]),l("div",de,[c(w,{label:"A",color:"bg-red-500",shape:"round",size:"w-15 h-15",onPress:()=>i(t)("a")},null,8,["onPress"]),c(w,{label:"B",color:"bg-yellow-400",shape:"round",size:"w-15 h-15",onPress:()=>i(t)("b")},null,8,["onPress"]),l("div",pe,[c(w,{label:"START",color:"bg-gray-400",onPress:()=>i(t)("start"),shape:"pill",textColor:"text-gray-900",size:"w-22 h-10"},null,8,["onPress"])])])]))}}),he={class:"relative flex justify-between items-center select-none bg-gray-50 rounded-xl p-6 border-4 border-gray-400 w-[500px] gap-6"},fe={class:"pt-14"},me={class:"flex items-center gap-4 pt-14"},ye=p({__name:"NESController",props:{onButtonPress:{}},setup(n){const t=n.onButtonPress;return(o,r)=>(a(),u("div",he,[c(P,{onDirection:i(t),size:"w-30 h-30",class:""},null,8,["onDirection"]),l("div",fe,[c(w,{label:"START",color:"bg-gray-400",onPress:()=>i(t)("start"),shape:"pill",textColor:"text-gray-900",size:"w-20 h-8"},null,8,["onPress"])]),l("div",me,[c(w,{label:"A",color:"bg-red-500",shape:"round",size:"w-16 h-16",onPress:()=>i(t)("a")},null,8,["onPress"]),c(w,{label:"B",color:"bg-yellow-400",shape:"round",size:"w-16 h-16",onPress:()=>i(t)("b")},null,8,["onPress"])])]))}}),ve={class:"py-6 flex flex-col justify-between items-center gap-2 bg-gray-900 rounded-lg border-2 border-green-800 w-[120px] h-[540px] lg:flex-row lg:w-[940px] lg:h-[120px] lg:items-center lg:px-6 lg:py-0"},be={class:"flex flex-col items-center justify-center gap-1.5 flex-1 lg:flex-row lg:h-[90px]"},we=p({__name:"ControllerDisplay",props:{pressedButtons:{}},setup(n){return(e,t)=>(a(),u("div",ve,[l("div",be,[(a(!0),u(R,null,q(e.pressedButtons,(o,r)=>(a(),u("span",{key:r,class:"text-xl font-mono select-none text-green-600 rounded px-2 py-1 tracking-tight"},K(o.toUpperCase()),1))),128))]),S(e.$slots,"default")]))}}),Ee="/easter/assets/contra-3nvrDkjL.webp",Ce={key:0,class:"absolute inset-0 flex items-center justify-center bg-black/80 z-50"},xe=["src"],ke=p({__name:"ControllerRemote",setup(n){const e=x([]),t=x(!1),o=x(null),r=[["up","up","down","down","left","right","left","right","b","a"]];function s(m){m!=="start"?e.value.length<10&&(e.value=[...e.value,m]):r.some(h=>h.length===e.value.length&&h.every((v,_)=>v===e.value[_]))?(o.value=Ee,setTimeout(()=>o.value=null,2e3),e.value=[]):(t.value=!0,setTimeout(()=>t.value=!1,1e3))}function g(){e.value=[],o.value=null,t.value=!1}const f=x(!1);function C(){f.value=window.matchMedia("(min-width: 1024px)").matches}return H(()=>{C(),window.addEventListener("resize",C)}),U(()=>{window.removeEventListener("resize",C)}),(m,y)=>(a(),u("div",{class:E(["flex w-full h-full items-center justify-center gap-6",f.value?"flex-col":"flex-row"])},[c(we,{pressedButtons:e.value,class:"flex-1"},{default:M(()=>[c(w,{label:"RESET",color:"bg-blue-400",shape:"pill",size:"w-22 h-8",class:"",onPress:g})]),_:1},8,["pressedButtons"]),l("div",{class:E([t.value?"animate-shakeHorizontal":"","flex-1"])},[f.value?(a(),k(ye,{key:1,onButtonPress:s})):(a(),k(ge,{key:0,onButtonPress:s}))],2),o.value?(a(),u("div",Ce,[l("img",{src:o.value,alt:"Success",class:"w-full h-auto max-w-full lg:max-h-[700px] lg:w-auto rounded-lg shadow-lg",style:{"object-fit":"contain"}},null,8,xe)])):$("",!0)],2))}}),_e={class:"flex flex-col items-center justify-center h-full"},Me={__name:"Core",props:{reactiveState:{type:Object,required:!0},coreInterface:{type:Object,required:!0}},setup(n){const e=n,t=x(!1);let o=null;const r=V(()=>e.reactiveState.activeModal!==null),s=V(()=>e.reactiveState.activeModal);F(()=>{var m,y,h;return((m=s.value)==null?void 0:m.type)+":"+(((h=(y=s.value)==null?void 0:y.props)==null?void 0:h.id)||"")},()=>{t.value=!1,o&&clearTimeout(o),o=setTimeout(()=>{t.value=!0},200)});const g=()=>{o&&clearTimeout(o),t.value=!0},f=()=>{var m,y,h,v;((m=s.value)==null?void 0:m.type)==="egg"&&((h=(y=s.value)==null?void 0:y.props)!=null&&h.id)?e.coreInterface.requestClose(s.value.props.id):((v=s.value)==null?void 0:v.type)==="controller"&&(e.reactiveState.activeModal=null)},C=()=>{e.reactiveState.errorModal.show=!1};return T("closeModal",f),(m,y)=>{var h,v;return a(),u("div",_e,[c(te,{isVisible:r.value},null,8,["isVisible"]),((h=s.value)==null?void 0:h.type)==="egg"?(a(),k(oe,{key:0,isVisible:r.value&&t.value},{default:M(()=>[c(le,null,{default:M(()=>{var _,D;return[(a(),k(O((_=s.value.props)==null?void 0:_.component),N(W({...(D=s.value.props)==null?void 0:D.props,notifyContentReady:g})),null,16))]}),_:1})]),_:1},8,["isVisible"])):$("",!0),((v=s.value)==null?void 0:v.type)==="controller"?(a(),k(ie,{key:1,isVisible:r.value},{default:M(()=>[c(ke)]),_:1},8,["isVisible"])):$("",!0),c(ee,{show:n.reactiveState.errorModal.show,message:n.reactiveState.errorModal.message,onClose:C},null,8,["show","message"])])}}},$e=`
  .ee-error-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .ee-error-content {
    background: white;
    padding: 30px;
    border-radius: 8px;
    max-width: 400px;
    text-align: center;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  }

  .ee-error-content h3 {
    margin: 0 0 15px 0;
    color: #e74c3c;
    font-size: 24px;
  }

  .ee-error-content p {
    margin: 0 0 15px 0;
    color: #333;
    font-size: 16px;
    line-height: 1.5;
  }

  .ee-error-note {
    font-size: 14px;
    color: #666;
    font-style: italic;
  }

  .ee-error-close {
    background: #3498db;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
    transition: background 0.2s;
  }

  .ee-error-close:hover {
    background: #2980b9;
  }
`;class Se{constructor(e){d(this,"app");d(this,"errorModal");this.app=e,this.errorModal={show:!1,message:"",eggId:null}}showError(e,t,o,r={}){this.errorModal={show:!0,message:this.getErrorMessage(t,e),eggId:e},this.updateAppData()}closeError(){this.errorModal.show=!1,this.updateAppData()}updateAppData(){this.app._instance&&this.app._instance.data&&(this.app._instance.data.errorModal=this.errorModal)}getErrorMessage(e,t){var s;const o=(s=this.app.eggs)==null?void 0:s.get(t),r=o?o.name:t;switch(e){case"assetLoadError":return`We're having trouble loading some content for the "${r}" Easter egg.`;case"renderError":return`Something went wrong while displaying the "${r}" Easter egg.`;case"networkError":return`We're having trouble connecting to the server for the "${r}" Easter egg.`;default:return`An unexpected error occurred with the "${r}" Easter egg.`}}}class Ke{constructor(){d(this,"activeCombinations");d(this,"pressedKeys");this.activeCombinations=new Map,this.pressedKeys=new Set}normalizeKey(e){return{Í:"s",í:"s",ß:"s",ś:"s",š:"s",ş:"s",ș:"s",á:"a",à:"a",â:"a",ä:"a",ã:"a",å:"a",ā:"a",é:"e",è:"e",ê:"e",ë:"e",ē:"e",ę:"e",ė:"e",ì:"i",î:"i",ï:"i",ī:"i",į:"i",ı:"i",ó:"o",ò:"o",ô:"o",ö:"o",õ:"o",ō:"o",ø:"o",ú:"u",ù:"u",û:"u",ü:"u",ū:"u",ų:"u",ů:"u",ý:"y",ÿ:"y",ŷ:"y",ȳ:"y",ç:"c",ć:"c",č:"c",ĉ:"c",ċ:"c",ñ:"n",ń:"n",ň:"n",ņ:"n",ŋ:"n",ź:"z",ż:"z",ž:"z",ȥ:"z",ł:"l",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ŕ:"r",ř:"r",ŗ:"r",ȑ:"r",ȓ:"r",ğ:"g",ġ:"g",ģ:"g",ĝ:"g",ǧ:"g",ĥ:"h",ħ:"h",ḧ:"h",ḣ:"h",ḥ:"h",ĵ:"j",ǰ:"j",ķ:"k",ḱ:"k",ḳ:"k",ḵ:"k",ḿ:"m",ṁ:"m",ṃ:"m",ṕ:"p",ṗ:"p",ṫ:"t",ṭ:"t",ṯ:"t",ŧ:"t",ẁ:"w",ẃ:"w",ẅ:"w",ẇ:"w",ẉ:"w",ď:"d",ḋ:"d",ḍ:"d",ḏ:"d",ḑ:"d",ḓ:"d",ḃ:"b",ḅ:"b",ḇ:"b",ṽ:"v",ṿ:"v",ḟ:"f",ẋ:"x",ẍ:"x","ɋ":"q"}[e]||e.toLowerCase()}normalizeModifierKey(e){return{Alt:"Option",Option:"Alt",Meta:"Command",Command:"Meta"}[e]||e}isKeyCombinationMatch(e,t){return!(!t||t.type!=="keyboard"||e.key.toLowerCase()!==t.key.toLowerCase()||t.ctrlKey&&!e.ctrlKey||t.shiftKey&&!e.shiftKey||t.altKey&&!e.altKey||t.metaKey&&!e.metaKey)}handleKeyDown(e){this.pressedKeys.add(e.key)}handleKeyUp(e){this.pressedKeys.delete(e.key)}reset(){this.pressedKeys.clear()}registerCombination(e,t){this.activeCombinations.set(e,t)}unregisterCombination(e){this.activeCombinations.delete(e)}}class ze{constructor(){d(this,"eggs");d(this,"activeModal");d(this,"vueApp");d(this,"container");d(this,"isVisible");d(this,"keyHandler");d(this,"errorHandlers");d(this,"reactiveState");d(this,"styleElement");d(this,"errorHandler");this.eggs=new Map,this.activeModal=null,this.vueApp=null,this.container=null,this.isVisible=!1,this.keyHandler=new Ke,this.errorHandlers=new Map,this.reactiveState=null,this.styleElement=null,this.errorHandler=null,this.handleKeyDown=this.handleKeyDown.bind(this),this.handleKeyUp=this.handleKeyUp.bind(this),this.mount=this.mount.bind(this),this.unmount=this.unmount.bind(this),this.handleError=this.handleError.bind(this),this.showController=this.showController.bind(this)}initialize(){console.log("EasterEggCore: Initializing..."),this.reactiveState=G({activeModal:null,errorModal:{show:!1,message:"",eggId:null}}),this.container=document.createElement("div"),this.container.id="easter-root",this.container.className="easter-root",document.body.appendChild(this.container),console.log("EasterEggCore: Root container appended to body"),this.styleElement=document.createElement("style"),this.styleElement.id="easter-egg-core-styles";const e=`
      ${$e}
      ${X}
    `;this.styleElement.textContent=e,document.head.appendChild(this.styleElement),console.log("EasterEggCore: Core styles injected into document head.");const t={requestClose:o=>{console.log(`EasterEggCore: Request to close egg ${o} received`),this.hideEgg(o)},showEgg:(o,r)=>{console.log(`EasterEggCore: Request to show egg ${o} received`),this.showEgg(o,r)},registerEgg:(o,r,s)=>{console.log(`EasterEggCore: Request to register egg ${o} received`),this.registerEgg(o,r,s)},showController:()=>{this.showController()}};this.vueApp=J(Me,{reactiveState:this.reactiveState,coreInterface:t}),this.errorHandler=new Se(this.reactiveState.errorModal),this.vueApp.mount(this.container),console.log("EasterEggCore: Vue app mounted."),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp),console.log("EasterEggCore: Keyboard event listeners added to document."),console.log("EasterEggCore: Initialization complete")}registerEgg(e,t,o={}){console.log(`EasterEggCore: Registering egg ${e} with options:`,o),this.eggs.set(e,{component:t,options:o,isVisible:!1}),console.log(`EasterEggCore: Successfully registered egg ${e}`),console.log("EasterEggCore: Current registered eggs:",Array.from(this.eggs.keys()))}handleKeyDown(e){if(this.keyHandler.handleKeyDown(e),e.key==="Escape"&&this.activeModal){console.log("EasterEggCore: Escape key pressed, unmounting active egg."),e.preventDefault(),this.unmount();return}console.log("EasterEggCore: Checking key combinations for eggs:",Array.from(this.eggs.entries()).map(([t,o])=>({id:t,isVisible:o.isVisible})))}handleKeyUp(e){this.keyHandler.handleKeyUp(e)}async showEgg(e,t={}){console.log(`EasterEggCore: Showing egg ${e} with options:`,t);const o=this.eggs.get(e);if(!o){console.error(`EasterEggCore: Egg ${e} not found`);return}try{const r=typeof o.component=="function"?(await o.component()).StaffGridEggComponent:o.component;console.log("Staff data from options:",t.info),console.log("Staff data from egg options:",o.options.info);const s={title:t.title||o.options.title||"Our Team",info:Array.isArray(t.info)?t.info:Array.isArray(o.options.info)?o.options.info:[],coreInterface:{requestClose:()=>this.hideEgg(e)}};console.log("Final merged options:",s),this.reactiveState.activeModal={type:"egg",props:{id:e,component:Q(r),props:s}},this.isVisible=!0;const g=this.container.querySelector(".ee-content"),f=this.container.querySelector(".ee-backdrop");g&&g.classList.add("ee-content-visible"),f&&f.classList.add("ee-backdrop-visible"),this.eggs.set(e,{...o,isVisible:!0})}catch(r){console.error(`EasterEggCore: Error showing egg ${e}:`,r)}}showController(){this.reactiveState.activeModal={type:"controller",props:{}},this.isVisible=!0;const e=this.container.querySelector(".ee-content"),t=this.container.querySelector(".ee-backdrop");e&&e.classList.add("ee-content-visible"),t&&t.classList.add("ee-backdrop-visible")}hideEgg(e){console.log(`EasterEggCore: Hiding egg ${e}`);const t=this.eggs.get(e);if(!t){console.warn(`EasterEggCore: Attempted to hide non-existent egg ${e}`);return}this.reactiveState.activeModal=null,this.isVisible=!1;const o=this.container.querySelector(".ee-content"),r=this.container.querySelector(".ee-backdrop");o?(console.log("Removing ee-content-visible class"),o.classList.remove("ee-content-visible")):console.warn("Could not find .ee-content element"),r?(console.log("Removing ee-backdrop-visible class"),r.classList.remove("ee-backdrop-visible")):console.warn("Could not find .ee-backdrop element"),this.eggs.set(e,{...t,isVisible:!1}),this.keyHandler.reset(),console.log(`EasterEggCore: Egg ${e} hidden successfully`)}mount(e){const t=this.eggs.get(e);if(!t){console.error(`EasterEggCore: Attempted to mount unknown egg ${e}`);return}this.activeModal&&this.activeModal.props.id!==e&&this.unmount(),console.log(`EasterEggCore: Mounting egg ${e}`,t),this.activeModal={type:"egg",props:{...t,id:e,props:t.options}},this.reactiveState.activeModal=this.activeModal,this.isVisible=!0,console.log(`EasterEggCore: Egg ${e} is now active and visible (pending Vue render).`)}unmount(){this.activeModal&&(console.log("EasterEggCore: Unmounting active modal"),this.activeModal=null,this.reactiveState.activeModal=null,this.isVisible=!1,this.keyHandler.reset(),console.log("EasterEggCore: Active modal unmounted and hidden."))}destroy(){console.log("EasterEggCore: Destroying instance"),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.vueApp&&this.vueApp.unmount(),this.container&&this.container.remove(),this.styleElement&&this.styleElement.remove(),console.log("EasterEggCore: Cleanup complete")}handleError(e,t,o,r={}){console.error(`EasterEggCore: Error in egg ${e}:`,t,o);const s=this.errorHandlers.get(e);if(s&&s[t])try{return s[t](o,r),!0}catch(g){console.error(`EasterEggCore: Error handler for ${e} failed:`,g)}return this.handleDefaultError(e,t,o,r),!1}handleDefaultError(e,t,o,r){switch(this.reactiveState?(this.reactiveState.errorModal.eggId=e,this.reactiveState.errorModal.message=`Error in ${e} (${t}): ${o.message}`,this.reactiveState.errorModal.show=!0):console.error("EasterEggCore: Reactive state not available. Cannot show error modal."),t){case"renderError":console.warn(`EasterEggCore: Render error for egg ${e}, attempting recovery`),this.unmount(),setTimeout(()=>this.mount(e),100);break;default:console.error(`EasterEggCore: Unhandled error type ${t} for egg ${e}`)}}}const b=new ze;function Ve(){b.initialize()}function Le({trigger:n,action:e}){if(n.type==="keyboard")document.addEventListener("keydown",t=>{t.key.toLowerCase()===n.key.toLowerCase()&&!!n.ctrlKey===t.ctrlKey&&!!n.altKey===t.altKey&&!!n.shiftKey===t.shiftKey&&(t.preventDefault(),e.type==="egg"&&b.showEgg(e.eggId,e.options),e.type==="controller"&&b.showController())});else if(n.type==="click"){const t=()=>{if(n.elementId){const o=document.getElementById(n.elementId);o&&o.addEventListener("click",()=>{e.type==="egg"&&b.showEgg(e.eggId,e.options),e.type==="controller"&&b.showController()})}else n.selector&&document.querySelectorAll(n.selector).forEach(o=>{o.addEventListener("click",()=>{e.type==="egg"&&b.showEgg(e.eggId,e.options),e.type==="controller"&&b.showController()})})};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",t):t()}}export{B as _,Le as a,b as c,Ve as r};
