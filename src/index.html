<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Easter Egg Demo</title>
    <link rel="stylesheet" href="./styles/index.css" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
    />
  </head>
  <body class="text-[#320b5c] bg-[#dbfdff] min-h-screen">
    <nav class="bg-green-200 relative border-b-4 border-dotted border-green-700">
      <div class="top-nav-bar-height mx-auto px-2 lg:px-8">
        <div class="relative z-[21] flex h-full items-center justify-between">
          <!-- mobile nav -->
          <div class="absolute inset-y-0 left-0 flex items-center lg:hidden">
            <button
              type="button"
              class="inline-flex items-center justify-center rounded-md p-2 text-gray-700 hover:bg-gray-700 hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white"
              aria-controls="mobile-menu"
              aria-expanded="false"
            >
              <span class="sr-only">Open main menu</span
              ><svg
                class="block h-6 w-6"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16"
                ></path></svg
              ><svg
                class="hidden h-6 w-6"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M6 18L18 6M6 6l12 12"
                ></path>
              </svg>
            </button>
            <button
              class="h-full w-[50px] opacity-0 focus:opacity-20 z-20"
              aria-label="staff directory"
              tabindex="0"
              data-modal-trigger="staff-grid"
            ></button>
          </div>
          <div
            class="flex flex-1 items-center justify-between"
          >
            <!-- LOGO -->
            <div class="hidden shrink-0 lg:flex">
              <div class="flex flex-row items-center">
                <span class="text-2xl it">Easter Logo</span>
                <button
                  class="h-full w-[50px] opacity-0 focus:opacity-20 z-20"
                  aria-label="staff directory"
                  tabindex="0"
                  data-modal-trigger="staff-grid"
                ></button>
              </div>
            </div>
            <!-- <div class="hidden lg:block text-2xl">Totally Awesome Site</div> -->
          </div>
        </div>
      </div>
      <div id="mobile-menu" class="hidden lg:hidden">
        <div class="space-y-1 px-2 pb-3 pt-2">
          <span>Option 1</span>
          <span>Option 2</span>
          <span>Option 3</span>
          </div>
        </div>
      </div>
      <button
        class="absolute top-0 right-0 h-full w-[50px] opacity-0 focus:opacity-20 z-30"
        aria-label="controller"
        tabindex="1"
        data-modal-trigger="controller"
      ></button>
      <div class="easter-egg-border"></div>
    </nav>

    <div class="p-8 pt-16 max-w-4xl mx-auto z-1 text-lg">
      <!-- TITLE -->
      <h1 class="text-5xl mb-3 !text-fuchsia-800">Easter üêá</h1>
      <!-- DESCRIPTION -->
      <p class="mb-5">
        A project by <a href="http://www.vellandi.net" class="textlink">Mario Vellandi</a>
      </p>
      <p class="mb-5">
        Modal windows are typically used for notifications and advertisements. But they'd also work for asides, callouts, mini-applications, games, and more.
        What if they could be hidden or unlocked with a secret code? Easter
        is a flexible modal system that does this. It runs as an imported script on a web page, and acts like a micro-CMS. Media can be independently-developed and loaded as "eggs". 
      <p class="mb-7">
        <a href="bootdev.html" class="textlink">Click here</a> for a sample prototype modeled after the tech educational platform Boot.dev.
      </p>
      <!-- TAKEAWAY -->
      <h2 class="text-3xl mb-2 !text-fuchsia-800">Big Picture</h2>
      <p class="mb-5">
        Like embedded video and analytics services, Easter media can be distributed on any webpage using an imported script. When combined with custom triggers and interactions, it
        allows being helpful and sparking intrigue, surprise, and joy. Although Easter can streamline lightweight media distribution across multiple internal web domains, perhaps the larger opportunity is with 3rd parties who can easily include content, promotions, games, or application functionality.
      </p>
      <!-- INSTRUCTIONS -->
      <h2 class="text-3xl mb-3 !text-fuchsia-800">Instructions</h2>
      <div class="space-y-4">
        <p>
          <span
            class="-translate-x-2 text-lg bg-gray-600 text-gray-50 rounded-lg px-2 inline-block"
          >
            Keyboard</span
          >Press <kbd class="px-2 py-1 bg-gray-200 rounded">Ctrl</kbd> +
          <kbd class="px-2 py-1 bg-gray-200 rounded">H</kbd> to trigger a simple
          modal.
        </p>
        <p>
          <span
            class="-translate-x-2 text-lg bg-gray-600 text-gray-50 rounded-lg px-2 inline-block"
          >
            Hidden Modal</span
          >At the top-left of the screen, click 5 times to the right of the logo  
          <b class="underline underline-offset-2 text-black">or</b> mobile
          menu button.
        </p>
        <p>
          <span
            class="-translate-x-2 text-lg bg-gray-600 text-gray-50 rounded-lg px-2 inline-block"
          >
            Hidden Controller</span
          >Click 5 times in the empty space at the top-right corner of the screen, in the navigation bar. Enter the Konami Contra code if you know it.
        </p>
      </div>

      <h2 class="text-3xl mt-8 mb-3 !text-fuchsia-800">Dive Deeper</h2>
      <h3 class="text-2xl mb-1 !text-fuchsia-900">Process</h3>
      <div class="space-y-4 mb-8">
        <p>
          Easter's first implementation was inspired by the zsh plugin system,
          and was overly decoupled using separate repos, local web servers, and
          Tigris object storage in production. Although this worked, file
          caching became a problem.
        </p>
        <p>
          Using the shadow-DOM was also explored. The key finding was that it'll
          selectively inherit properties from the parent document. Hosting media
          on 3rd party sites using shadow DOM requires setting reset styles and
          unique variable names that will unlikely conflict with the host.
        </p>
        <p>
          The project was then rewritten as a simple monorepo, with additional
          features like a game controller and display for entering secret codes
          to unlock media.
        </p>
      </div>

      <h3 class="text-2xl mb-1 !text-fuchsia-900">Technical Details</h3>
      <div class="space-y-4 mb-8">
        <p>
          Built with TypeScript, VueJS, and Vite. The system can display,
          trigger, and load independently-developed modals. Styling uses
          Tailwind and a host's stylesheets and images. For multiple domains, a
          shadow-DOM implementation has been successfully tested. For
          full-decoupling, the system can be adapted to dynamically load
          manifests and modules via server calls. This allows each usage to
          select the modals and affordances it's interested in, and load them on
          demand.
        </p>
      </div>
      <h3 class="text-2xl mb-1 !text-fuchsia-900">Known Issues</h3>
      <div class="space-y-4 mb-8">
        <p>
          The modal fade-in uses a short (200ms) delay before showing content,
          unless the egg component explicitly signals readiness via a callback.
          This is a workaround for the lack of a true Vue Suspense or asset
          preloading mechanism. Eggs with images or assets can call the
          `notifyContentReady` prop to control when the modal appears, but most
          eggs will simply fade in after the delay. This may not be robust for
          long-loading assets.
        </p>
      </div>
      <h3 class="text-2xl mb-1 !text-fuchsia-900">Improvement Opportunities</h3>
      <div class="space-y-4 mb-8">
        <h4 class="text-xl mb-1 !text-fuchsia-900">Accessibility</h4>
        <ul class="list-disc list-inside">
          <li>
            Add ARIA roles (e.g., `role="dialog"`), `aria-modal="true"`, and
            proper labeling to the modal.
          </li>
          <li>
            Implement a focus trap so keyboard users can't tab out of the modal.
          </li>
          <li>Ensure the close button is always accessible and labeled.</li>
        </ul>
      </div>
      <div class="space-y-4 mb-8">
        <h4 class="text-xl mb-1 !text-fuchsia-900">Dynamic Egg Imports</h4>
        <p>
          Refactor egg registration to use dynamic imports for performance and
          bundle size reduction. Consider using a web server to list and serve
          available eggs.
        </p>
      </div>
      <div class="space-y-4 mb-8">
        <h4 class="text-xl mb-1 !text-fuchsia-900">Extending the Generic Trigger System</h4>
        <ul class="list-disc list-inside">
          <li>
            Add support for more trigger types (e.g. multi-click, long-press).
          </li>
          <li>
            Optionally, unify multi-click into the generic system for even more
            consistency.
          </li>
        </ul>
      </div>
    </div>

    <script type="module" src="./main.js"></script>
  </body>
</html>
